<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>osu! 卡牌对战（预览版）</title>
    <link href="./index.css" rel="stylesheet">
    <script src="./js/Card.js"></script>
    <script src="./js/CardGame.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <h1>osu! 卡牌对战（预览版）</h1>
            <p>底部可查阅详细规则</p>
        </header>

        <div class="game-info">
            <div class="player-info">
                <h2>玩家</h2>
                <div class="health">生命值: <span id="player-health">6</span>/6</div>
                <div class="health-bar">
                    <div class="health-fill" id="player-health-bar" style="width: 100%"></div>
                </div>
            </div>

            <div class="round-info">
                <h2>回合 <span id="round-number">1</span></h2>
                <div>卡牌剩余: <span id="cards-left">24</span></div>
            </div>

            <div class="enemy-info">
                <h2>电脑</h2>
                <div class="health">生命值: <span id="enemy-health">6</span>/6</div>
                <div class="health-bar">
                    <div class="health-fill" id="enemy-health-bar" style="width: 100%"></div>
                </div>
            </div>
        </div>

        <div class="mod-indicator" id="mod-indicator">
            当前比赛: NM (无MOD)
        </div>

        <div class="battle-area">
            <div class="player-area">
                <h3 class="area-title">你的手牌</h3>
                <div class="card-container" id="player-hand"></div>
            </div>

            <div class="enemy-area">
                <h3 class="area-title">电脑手牌</h3>
                <div class="card-container" id="enemy-hand"></div>
            </div>
        </div>

        <div class="actions">
            <button id="play-btn" disabled>出牌 (选择1-3张)</button>
            <button id="end-turn-btn">下一回合</button>
            <button id="restart-btn">重新开始</button>
        </div>

        <!-- 技能区域 -->
        <div class="skills-area">
            <h3>玩家技能（消耗1点生命值，每个技能只能使用一次）</h3>
            <div class="skills">
                <div class="skill-card" id="skill1" data-skill="reveal">
                    <div class="skill-left">1</div>
                    <div class="skill-name">侦察敌情</div>
                    <div class="skill-desc">显示敌方当前所有手牌，并持续显示这些卡牌（新抽卡牌仍隐藏）</div>
                </div>

                <div class="skill-card" id="skill2" data-skill="draw">
                    <div class="skill-left">1</div>
                    <div class="skill-name">紧急补给</div>
                    <div class="skill-desc">额外抽取2张卡牌</div>
                </div>

                <div class="skill-card" id="skill3" data-skill="redraw">
                    <div class="skill-left">1</div>
                    <div class="skill-name">重整旗鼓</div>
                    <div class="skill-desc">丢弃所有手牌，重新抽取相同数量的卡牌（注意卡牌剩余数量）</div>
                </div>

                <div class="skill-card" id="skill4" data-skill="steal">
                    <div class="skill-left">1</div>
                    <div class="skill-name">妙手空空</div>
                    <div class="skill-desc">从敌人手中偷取1张指定的卡牌</div>
                </div>
            </div>
            <div class="skill-hint" id="skill-hint">生命值大于1时可以使用技能</div>
        </div>

        <!-- 回合结果区域 -->
        <div class="result-area">
            <div class="result-title">回合结果</div>

            <!-- 战斗结果放在顶部中央 -->
            <div id="battle-outcome" class="battle-outcome">等待开始...</div>

            <!-- 暴击提示 -->
            <div id="critical-indicator"></div>

            <!-- 玩家和电脑出牌区域 -->
            <div class="played-cards-container">
                <div class="player-cards">
                    <div class="cards-label">玩家出牌</div>
                    <div id="player-played" class="played-cards"></div>
                </div>

                <div class="enemy-cards">
                    <div class="cards-label">电脑出牌</div>
                    <div id="enemy-played" class="played-cards"></div>
                </div>
            </div>

            <!-- 详细比较信息 -->
            <div id="comparison-detail" class="comparison-detail"></div>
        </div>

        <div class="instructions">
            <h3>游戏规则</h3>
            <ul>
                <li>游戏开始时，双方各有6点生命值</li>
                <li>双方使用相同的随机卡池。每局游戏开始时，双方各抽取6张卡牌</li>
                <li>每回合开始时，战场会随机选择一个比赛MOD (NM, HR, EZ, DT, HD)</li>
                <li>当卡牌的MOD与比赛MOD匹配时，该回合该卡牌所有属性值x1.5</li>
                <li>每回合双方各抽取2张卡牌，你可以选择1-3张卡牌出战</li>
                <li>每回合比较双方出牌综合属性中最高的一项属性 (aim, spd, acc)</li>
                <li>如果平局，则比较第二高的属性，再次平局则比较第三属性</li>
                <li>失败方失去1点生命值，如果三个属性全部大于对手，则造成2点伤害（暴击）</li>
                <li>当双方都只剩1点生命时，进入TB决斗，可以出最多4张卡牌</li>
                <li>生命值先归零的一方失败</li>
            </ul>
        </div>
    </div>

    <script>
        // 初始化游戏
        document.addEventListener('DOMContentLoaded', () => {
            const game = new CardGame(false); // false表示不使用真实玩家
        });
    </script>
</body>

</html>